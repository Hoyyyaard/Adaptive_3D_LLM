{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        
        {
            "name": "vis_det_in_dense_caption",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                
                "--checkpoint_dir", "./ckpts/opt-1.3b/ll3da-scannet",
                "--test_ckpt", "ckpts/opt-1.3b/adaptive/ll3da-scannet-adaptive-traindet-wdetloss-region-pcd-from-scratch/checkpoint_20k.pth",
                "--dataset", "unified_densecap_scanrefer",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--criterion", "CiDEr",
                "--freeze_detector",
                "--freeze_llm",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--max_des_len", "256",
                "--max_prompt", "1",
                "--use_beam_search",
                "--test_only",
                "--log_dir", "results/debug",
                "--cache_dir","results/debug",
                "--vis_detection",
                "--adaptive_pcd_input",
                "--adaptive_pcd_num","40000",
                "--test_min_iou","0.25"
            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"6",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:15.0"
            }
        },
        {
            "name": "eval object caption",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--checkpoint_dir", "./ckpts/opt-1.3b/ll3da-scannet",
                "--test_ckpt", "./ckpts/opt-1.3b/ll3da-scannet/checkpoint_best.pth",
                "--dataset", "unified_object_caption",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--criterion", "CiDEr",
                "--freeze_detector",
                "--freeze_llm",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--max_des_len", "256",
                "--max_prompt", "1",
                "--use_beam_search",
                "--test_only",
                "--log_dir", "results/debug",
                "--adaptive_pcd_input",
                "--cache_dir","results/debug",
                "--caption_box_query"
                // "--special_dataset","results/size_filter_scannet_qa_datasets/val_size_s_1e-2_num180.json"

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"7",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "eval small object caption",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--checkpoint_dir", "results",
                "--test_ckpt", "ckpts/opt-1.3b/adaptive/adaptive-region-encoder-tuned-scannet/checkpoint.pth",
                "--dataset", "unified_small_object_caption_embodiedscan",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--criterion", "CiDEr",
                "--freeze_detector",
                "--freeze_llm",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--max_des_len", "256",
                "--max_prompt", "1",
                "--use_beam_search",
                "--test_only",
                "--log_dir", "results/debug",
                "--adaptive_pcd_input",
                "--cache_dir","results/debug",
                "--adaptive_pcd_num","40000",

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"7",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:15.0"
            }
        },

        {
            "name": "train refer",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--pretrained_weights", "./ckpts/opt-1.3b/ll3da-scannet/checkpoint_best.pth",
                "--checkpoint_dir", "results/debug", 
                "--dataset", "unified_densecap_scanrefer",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--freeze_llm",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--max_des_len", "256",
                "--max_prompt", "1",
                "--use_beam_search",
                "--criterion", "CiDEr@0.5",
                "--adaptive_pcd_input",
                "--cache_dir", "results/debug",

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"5",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },

        {
            "name": "eval ovdet",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--test_ckpt", "./ckpts/opt-1.3b/ll3da-scannet/checkpoint_best.pth",
                "--checkpoint_dir", "results/debug", 
                "--dataset", "unified_ovdet_scanrefer",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--freeze_llm",
                "--freeze_detector",
                "--batchsize_per_gpu", "8",
                "--ngpus", "1",
                "--max_des_len", "256",
                "--max_prompt", "1",
                "--use_beam_search",
                "--criterion", "CiDEr@0.5",
                "--cache_dir", "results/debug",
                "--test_only",

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"7",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "openscene eval",
            "type": "python",
            "request": "launch",
            "program": "run/preprocess.py",
            "cwd":"src/openscene",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--config","config/scannet/ours_openseg_pretrained.yaml",
                "feature_type", "distill",
                "save_folder", "results",
                
            ],
            "env": {
                "PYTHONPATH":".",
                "CUDA_VISIBLE_DEVICES":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "eval vg",
            "type": "python",
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "request": "launch",
            "program": "${workspaceFolder}/main.py",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--checkpoint_dir", "results",
                "--dataset", "unified_scanrefer_visual_grounding",
                "--test_ckpt", "ckpts/opt-1.3b/adaptive/adaptive-region-encoder-tuned-scannet/checkpoint.pth",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12221",
                "--criterion", "mIoU",
                "--freeze_detector",
                "--freeze_llm",
                "--batchsize_per_gpu", "16",
                "--ngpus", "8",
                "--max_des_len", "256",
                "--max_prompt", "1",
                "--use_beam_search",
                "--test_only",
                "--adaptive_pcd_input",
                "--cache_dir","results/process_datasets/adaptive_pcds_4w/",
                "--adaptive_pcd_num","40000",
                "--no_sample_prob"
            ],
            "console": "integratedTerminal",
            "env": {

                "CUDA_VISIBLE_DEVICES": "0,1,2,3,4,5,6,7",
                "PYDEVD_WARN_SLOW_RESOLVE_TIMEOUT": "20",
            }
        },
        {
            "name": "Finetune Flex Opt ",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--checkpoint_dir", "results/debug", 
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dataset", "unified_scanqa",
                "--dist_url", "tcp://localhost:12345",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--cache_dir", "results/debug",
                "--finetune_flex_opt",
                "--pretrained_weights","ckpts/opt-1.3b/flex/encoder-openscene-maskformer-axis-align-w-sm-obj/checkpoint_36k.pth",
                "--load_pretrain_encoder",
                "--base_lr" , "1",
                "--final_lr" , "1",
                // "--gradient_checkpoint",
                "--warm_lr_epochs","0",
                "--num_finetune_hidden_layers","2",
                "--finetune_flex_self_attn"

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"1",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "openscene scene token preprocess",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--checkpoint_dir", "results/debug", 
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dataset", "unified_scene_list",
                "--dist_url", "tcp://localhost:12345",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--cache_dir", "results/debug",
                "--finetune_flex_opt",
                "--pretrained_weights","ckpts/opt-model/pytorch_model.bin",
                "--token_preprocess",
                "--num_flex_hidden_layers","0"

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"0",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "eval object caption flex opt",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--checkpoint_dir", "results",
                "--test_ckpt", "ckpts/opt-1.3b/flex/encoder-openscene-maskformer1/checkpoint_6k.pth",
                "--dataset", "unified_scanqa",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--use_beam_search",
                "--test_only",
                "--log_dir", "results/scanqa",
                "--cache_dir","results/debug",
                "--finetune_flex_opt",
                "--load_pretrain_encoder",

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"0",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "eval small object qa",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--checkpoint_dir", "results",
                "--test_ckpt", "ckpts/opt-1.3b/flex/encoder-openscene-maskformer1/checkpoint_6k.pth",
                "--dataset", "unified_small_object_scanqa",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--use_beam_search",
                "--test_only",
                "--log_dir", "results/scanqa",
                "--cache_dir","results/debug",
                "--finetune_flex_opt",
                "--load_pretrain_encoder",

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"0",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
        {
            "name": "vis flex attn",
            "type": "python",
            "request": "launch",
            "program": "main.py",
            "console": "integratedTerminal",
            "justMyCode": true,
            "python": "/home/admin/micromamba/envs/ll3da/bin/python",
            "args": [
                "--use_color",
                "--use_normal",
                "--detector", "detector_Vote2Cap_DETR",
                "--captioner", "ll3da",
                "--checkpoint_dir", "results",
                "--test_ckpt", "ckpts/opt-1.3b/flex/model/encoder-openscene-maskformer-axis-align-w-sm-obj/4layer/finetune_flex_self_attn/checkpoint_18k.pth",
                "--dataset", "unified_scanqa",
                "--vocab", "facebook/opt-1.3b",
                "--qformer_vocab", "bert-base-embedding",
                "--dist_url", "tcp://localhost:12345",
                "--batchsize_per_gpu", "1",
                "--ngpus", "1",
                "--use_beam_search",
                "--test_only",
                "--log_dir", "results/scanqa/vis_flex_attn",
                "--cache_dir","results/debug",
                "--finetune_flex_opt",
                "--finetune_flex_self_attn",
                "--num_finetune_hidden_layers","4"

            ],
            "env": {
                "PYTHONWARNINGS":"ignore:semaphore_tracker:UserWarning",
                "CUDA_VISIBLE_DEVICES":"1",
                "MKL_NUM_THREADS":"1",
                "NUMEXPR_NUM_THREADS":"1",
                "OMP_NUM_THREADS":"1",
                "DISPLAY":"localhost:10.0"
            }
        },
    ]
}